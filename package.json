// next.config.js
const withPWA = require("next-pwa")({
  dest: "public",               // dossier de sortie du service worker et assets
  disable: process.env.NODE_ENV === "development", // désactive en dev
  register: true,               // auto-register du SW
  skipWaiting: true,            // activate SW immédiatement après l'installation
});

const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,              // minification avec SWC
  experimental: {
    appDir: true,               // si tu utilises app/ dir Next 13+
  },
  webpack(config) {
    // Ajout de l'alias @ pour src/
    config.resolve.alias = {
      ...(config.resolve.alias || {}),
      "@": require("path").resolve(__dirname, "src"),
    };
    return config;
  },
};

module.exports = withPWA(nextConfig);
